<!DOCTYPE html>
<html>
<head>
    <title>RiskRecon Results</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="app-container">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h2 class="logo">RiskRecon</h2>

        <nav>
            <a href="/" class="nav-item">Start Scan</a>
            <a href="/profile" class="nav-item">{{ session.username }}</a>
            <a href="/logout" class="nav-item danger">Logout</a>
        </nav>
    </aside>

    <!-- Main content -->
    <main class="main-content">

        <h1>Scan Results</h1>
        <p class="muted">Automated Security Assessment Outcome</p>

        <!-- ========================= -->
        <!-- PHASE 20 – SECURITY POSTURE -->
        <!-- ========================= -->
        <div class="card" style="max-width:600px; margin:20px auto;">
            <h2>Overall Security Posture</h2>
            <h1>{{ posture.score }} / 100</h1>
            <h3>Grade: {{ posture.grade }}</h3>
            <p>{{ posture.status }}</p>
        </div>

        <!-- ========================= -->
        <!-- SUMMARY DASHBOARD -->
        <!-- ========================= -->
        <div class="dashboard">

            <div class="card">
                <h3>Risk Level</h3>
                <p class="risk {{ severity }}">{{ severity }}</p>
            </div>

            <div class="card">
                <h3>Risk Score</h3>
                <p>{{ risk_score }}</p>
            </div>

            <div class="card">
                <h3>Total Findings</h3>
                <p>{{ vuln_count }}</p>
            </div>

            <div class="card">
                <h3>Scan Mode</h3>
                <p>{{ mode|capitalize }}</p>
            </div>

        </div>

        <!-- ========================= -->
        <!-- PHASE 17 – INTELLIGENCE -->
        <!-- ========================= -->
        <h2>Why this Risk Level?</h2>

        <ul class="explanations">
            {% for reason in explanations %}
                <li>{{ reason }}</li>
            {% endfor %}
        </ul>

        <!-- ========================= -->
        <!-- PHASE 18 – COMPLIANCE -->
        <!-- ========================= -->
        <h2>Compliance Evaluation (OWASP)</h2>

        <table class="history-table">
            <tr>
                <th>Standard</th>
                <th>Category</th>
                <th>Status</th>
                <th>Reason</th>
            </tr>

            {% for item in compliance %}
            <tr>
                <td>{{ item.standard }}</td>
                <td>{{ item.title }}</td>
                <td class="risk {{ 'HIGH' if item.status == 'Violation' else 'LOW' }}">
                    {{ item.status }}
                </td>
                <td>{{ item.reason }}</td>
            </tr>
            {% endfor %}
        </table>

        <!-- ========================= -->
        <!-- PHASE 19 – RECOMMENDATIONS -->
        <!-- ========================= -->
        <h2>Remediation Recommendations</h2>

        {% for rec in recommendations %}
        <div class="card" style="max-width:700px; margin:15px auto; text-align:left;">
            <h3>{{ rec.issue }} ({{ rec.severity }})</h3>
            <p>{{ rec.recommendation }}</p>
        </div>
        {% endfor %}

        <br>

        <!-- ========================= -->
        <!-- REPORT DOWNLOAD -->
        <!-- ========================= -->
        <a href="/download/{{ domain }}">
            <button class="scan-btn">Download PDF Security Report</button>
        </a>

    </main>

</div>

</body>
</html>
